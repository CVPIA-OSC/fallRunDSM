
list2env(load_baseline_data(), envir = .GlobalEnv)
run_model <- function() {
  set.seed(2021)
  seeded_adults <- fall_run_model()
  output <- fall_run_model(seeds = seeded_adults)
  return(output)
}
expected_model_output <- list(spawners = structure(c(18441, 966, 28787, 353, 334, 508,
                                                     4072, 4594, 5978, 506, 376, 439, 422, 419, 334, 0, 0, 327, 101071,
                                                     15826, 0, 0, 72659, 0, 331, 325, 5713, 2918, 3281, 1222, 0, 34735,
                                                     1130, 61449, 438, 431, 689, 7183, 8163, 9001, 788, 430, 625,
                                                     612, 458, 408, 0, 0, 382, 210441, 33699, 0, 0, 96890, 0, 460,
                                                     417, 12065, 6109, 6641, 2504, 0, 22952, 1371, 42721, 303, 284,
                                                     512, 4491, 4858, 5161, 604, 328, 467, 391, 552, 317, 0, 0, 314,
                                                     147043, 23255, 0, 0, 73179, 0, 315, 298, 8517, 4326, 4607, 1738,
                                                     0, 19743, 2455, 42087, 255, 229, 445, 3293, 2712, 1952, 511,
                                                     291, 358, 257, 1085, 227, 0, 0, 337, 141725, 22971, 0, 0, 71136,
                                                     0, 303, 252, 8442, 4116, 4511, 1646, 0, 17090, 4080, 35079, 390,
                                                     362, 422, 3026, 2716, 4147, 511, 577, 402, 425, 1813, 378, 0,
                                                     0, 449, 119383, 19464, 0, 0, 62522, 0, 281, 250, 7147, 3433,
                                                     3819, 1414, 0, 12485, 7246, 16444, 915, 992, 457, 2747, 4368,
                                                     9831, 498, 1538, 464, 1011, 4503, 810, 0, 0, 627, 58146, 9261,
                                                     0, 0, 68082, 0, 399, 406, 3317, 1850, 2029, 888, 0, 15698, 9616,
                                                     20087, 1270, 1300, 540, 3308, 6239, 11212, 591, 1871, 550, 1331,
                                                     7090, 1015, 0, 0, 639, 71308, 11578, 0, 0, 81176, 0, 490, 455,
                                                     4177, 2194, 2445, 1068, 0, 16940, 8040, 30172, 810, 775, 433,
                                                     3174, 4370, 5606, 506, 837, 384, 755, 6203, 636, 0, 0, 604, 102866,
                                                     16484, 0, 0, 56645, 0, 328, 252, 6019, 3071, 3367, 1258, 0, 14210,
                                                     7325, 29288, 358, 447, 311, 2507, 2260, 2379, 397, 834, 290,
                                                     384, 5701, 405, 0, 0, 645, 98073, 15960, 0, 0, 40443, 0, 216,
                                                     211, 5841, 2860, 3063, 1203, 0, 11434, 6669, 22547, 383, 478,
                                                     297, 1991, 1744, 2416, 364, 1244, 259, 350, 5936, 428, 0, 0,
                                                     977, 75937, 12129, 0, 0, 41137, 0, 220, 206, 4327, 2271, 2454,
                                                     987, 0, 16175, 5321, 33795, 246, 314, 305, 2812, 2291, 1762,
                                                     390, 723, 287, 223, 5908, 285, 0, 0, 1553, 114355, 18672, 0,
                                                     0, 38113, 0, 190, 160, 6851, 3328, 3628, 1248, 0, 21452, 5471,
                                                     46970, 175, 210, 317, 3560, 2956, 1461, 427, 168, 238, 198, 5624,
                                                     223, 0, 0, 1412, 157096, 25175, 0, 0, 37311, 0, 178, 113, 9247,
                                                     4477, 4900, 1567, 0, 9015, 5007, 17379, 219, 300, 160, 1558,
                                                     1458, 1399, 198, 219, 146, 219, 5315, 242, 0, 0, 661, 59356,
                                                     9708, 0, 0, 17261, 0, 119, 86, 3456, 1775, 1886, 690, 0, 10922,
                                                     2860, 23300, 127, 187, 155, 1832, 1621, 995, 217, 115, 152, 133,
                                                     3294, 145, 0, 0, 541, 78349, 12494, 0, 0, 19689, 0, 99, 74, 4564,
                                                     2177, 2319, 841, 0, 12504, 1769, 28275, 79, 83, 183, 2103, 1683,
                                                     611, 239, 63, 143, 80, 1873, 60, 0, 0, 509, 94911, 15200, 0,
                                                     0, 22628, 0, 93, 61, 5486, 2611, 2932, 910, 0, 21737, 4063, 44538,
                                                     216, 251, 349, 3542, 3406, 1797, 462, 273, 279, 205, 3641, 207,
                                                     0, 0, 489, 152763, 24873, 0, 0, 45818, 0, 197, 120, 8854, 4278,
                                                     4760, 1660, 0, 10078, 7769, 16343, 324, 379, 269, 1906, 2242,
                                                     1974, 278, 444, 236, 334, 6661, 327, 0, 0, 723, 55843, 9105,
                                                     0, 0, 36191, 0, 197, 224, 3319, 1700, 1810, 755, 0, 29602, 11276,
                                                     59708, 427, 546, 511, 5381, 4900, 3462, 631, 602, 432, 498, 10076,
                                                     457, 0, 0, 879, 201119, 32429, 0, 0, 64355, 0, 342, 246, 11698,
                                                     5765, 6307, 2180, 0, 31391, 12658, 59148, 768, 917, 633, 5775,
                                                     5377, 5259, 807, 1301, 582, 754, 11390, 703, 0, 0, 848, 203161,
                                                     32419, 0, 0, 86127, 0, 512, 361, 11651, 5911, 6325, 2305, 0,
                                                     15272, 9055, 23306, 721, 805, 508, 2916, 3012, 4095, 512, 1416,
                                                     447, 717, 7410, 655, 0, 0, 776, 82335, 12735, 0, 0, 81245, 0,
                                                     368, 372, 4779, 2484, 2652, 1143, 0),
                                                   .Dim = c(31L, 20L),
                                                   .Dimnames = list(
                                                       c("Upper Sacramento River", "Antelope Creek", "Battle Creek",
                                                         "Bear Creek", "Big Chico Creek", "Butte Creek", "Clear Creek",
                                                         "Cottonwood Creek", "Cow Creek", "Deer Creek", "Elder Creek",
                                                         "Mill Creek", "Paynes Creek", "Stony Creek", "Thomes Creek",
                                                         "Upper-mid Sacramento River", "Sutter Bypass", "Bear River",
                                                         "Feather River", "Yuba River", "Lower-mid Sacramento River",
                                                         "Yolo Bypass", "American River", "Lower Sacramento River",
                                                         "Calaveras River", "Cosumnes River", "Mokelumne River", "Merced River",
                                                         "Stanislaus River", "Tuolumne River", "San Joaquin River"
                                                       ), c("1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11",
                                                            "12", "13", "14", "15", "16", "17", "18", "19", "20"))),
                              natural_spawners = structure(c(5588, 930, 140, 321, 287,
                                                             354, 2018, 2986, 5463, 285, 350, 293, 400, 384, 301, 0, 0,
                                                             298, 5230, 415, 0, 0, 53211, 0, 271, 299, 179, 194, 303,
                                                             256, 0, 7613, 1059, 203, 363, 366, 393, 2836, 4698, 7882,
                                                             320, 367, 341, 537, 405, 323, 0, 0, 330, 5973, 418, 0, 0,
                                                             55345, 0, 329, 347, 182, 242, 307, 312, 0, 3819, 1326, 108,
                                                             255, 237, 285, 1517, 2512, 4331, 264, 289, 268, 345, 512,
                                                             273, 0, 0, 261, 3053, 310, 0, 0, 43995, 0, 230, 251, 150,
                                                             195, 245, 245, 0, 796, 2411, 52, 212, 172, 208, 388, 401,
                                                             1103, 184, 249, 182, 197, 1046, 184, 0, 0, 279, 614, 274,
                                                             0, 0, 42975, 0, 204, 192, 102, 122, 180, 211, 0, 1675, 4038,
                                                             67, 351, 321, 249, 544, 748, 3476, 218, 545, 233, 383, 1779,
                                                             341, 0, 0, 411, 1289, 367, 0, 0, 38781, 0, 209, 219, 143,
                                                             161, 244, 234, 0, 5398, 7215, 160, 892, 974, 371, 1551, 3494,
                                                             9486, 378, 1525, 377, 984, 4487, 788, 0, 0, 609, 4000, 597,
                                                             0, 0, 57087, 0, 366, 390, 213, 292, 366, 342, 0, 6879, 9593,
                                                             222, 1256, 1279, 446, 1958, 5095, 10818, 433, 1857, 457,
                                                             1311, 7077, 996, 0, 0, 621, 4585, 665, 0, 0, 67587, 0, 448,
                                                             432, 258, 315, 424, 388, 0, 3547, 8001, 116, 777, 741, 260,
                                                             1065, 2735, 5035, 260, 801, 254, 719, 6168, 599, 0, 0, 579,
                                                             2363, 316, 0, 0, 36283, 0, 253, 226, 145, 175, 275, 241,
                                                             0, 1186, 7290, 54, 329, 391, 159, 432, 612, 1840, 174, 805,
                                                             158, 346, 5676, 374, 0, 0, 624, 682, 252, 0, 0, 20596, 0,
                                                             151, 180, 95, 106, 153, 178, 0, 1394, 6643, 59, 365, 443,
                                                             183, 411, 502, 2050, 176, 1222, 149, 330, 5910, 401, 0, 0,
                                                             950, 424, 212, 0, 0, 25698, 0, 175, 182, 83, 123, 180, 182,
                                                             0, 909, 5279, 31, 211, 264, 134, 334, 294, 1090, 104, 683,
                                                             133, 178, 5864, 254, 0, 0, 1518, 361, 191, 0, 0, 15101, 0,
                                                             130, 124, 67, 78, 115, 107, 0, 741, 5422, 24, 119, 157, 70,
                                                             241, 339, 584, 64, 128, 55, 139, 5577, 171, 0, 0, 1359, 248,
                                                             133, 0, 0, 5507, 0, 72, 66, 41, 52, 66, 65, 0, 1047, 4996,
                                                             31, 190, 280, 81, 308, 497, 1076, 70, 203, 63, 194, 5300,
                                                             219, 0, 0, 638, 420, 116, 0, 0, 5334, 0, 75, 67, 45, 38,
                                                             57, 79, 0, 587, 2836, 20, 102, 159, 37, 176, 320, 558, 48,
                                                             89, 48, 118, 3271, 121, 0, 0, 514, 356, 82, 0, 0, 4006, 0,
                                                             52, 55, 29, 25, 36, 50, 0, 269, 1736, 18, 53, 53, 33, 104,
                                                             101, 117, 22, 36, 24, 37, 1847, 35, 0, 0, 475, 297, 64, 0,
                                                             0, 3565, 0, 35, 32, 20, 29, 28, 25, 0, 1508, 4003, 47, 175,
                                                             198, 107, 439, 777, 910, 96, 220, 96, 156, 3602, 159, 0,
                                                             0, 441, 832, 154, 0, 0, 14855, 0, 88, 79, 61, 83, 119, 95,
                                                             0, 2790, 7756, 71, 312, 363, 175, 762, 1297, 1682, 152, 423,
                                                             160, 315, 6651, 301, 0, 0, 710, 1336, 258, 0, 0, 25174, 0,
                                                             159, 209, 98, 122, 172, 200, 0, 3170, 11202, 103, 356, 477,
                                                             199, 1185, 1593, 2321, 201, 537, 170, 427, 10024, 394, 0,
                                                             0, 834, 1720, 282, 0, 0, 24078, 0, 204, 179, 124, 142, 164,
                                                             189, 0, 4950, 12588, 160, 706, 836, 318, 1663, 2169, 4135,
                                                             309, 1243, 316, 685, 11317, 654, 0, 0, 802, 4264, 461, 0,
                                                             0, 46335, 0, 382, 300, 218, 257, 353, 332, 0, 4956, 9022,
                                                             156, 694, 767, 392, 1321, 1720, 3643, 331, 1392, 353, 683,
                                                             7387, 628, 0, 0, 754, 5295, 497, 0, 0, 65597, 0, 324, 350,
                                                             247, 278, 323, 375, 0), .Dim = c(31L, 20L), .Dimnames = list(
                                                               c("Upper Sacramento River", "Antelope Creek", "Battle Creek",
                                                                 "Bear Creek", "Big Chico Creek", "Butte Creek", "Clear Creek",
                                                                 "Cottonwood Creek", "Cow Creek", "Deer Creek", "Elder Creek",
                                                                 "Mill Creek", "Paynes Creek", "Stony Creek", "Thomes Creek",
                                                                 "Upper-mid Sacramento River", "Sutter Bypass", "Bear River",
                                                                 "Feather River", "Yuba River", "Lower-mid Sacramento River",
                                                                 "Yolo Bypass", "American River", "Lower Sacramento River",
                                                                 "Calaveras River", "Cosumnes River", "Mokelumne River",
                                                                 "Merced River", "Stanislaus River", "Tuolumne River",
                                                                 "San Joaquin River"), c("1", "2", "3", "4", "5", "6",
                                                                                         "7", "8", "9", "10", "11", "12", "13", "14", "15", "16",
                                                                                         "17", "18", "19", "20"))),
                              juvenile_biomass = structure(c(69488.2,
                                                             179168.4, 4521.6, 6876.6, 2480.6, 3893.6, 19813.4, 7441.8,
                                                             140263.8, 3045.8, 17646.8, 2637.6, 5714.8, 68389.2, 2198,
                                                             0, 0, 60382.2, 550756, 51025, 0, 0, 38314939.4, 0, 0, 0,
                                                             0, 0, 0, 0, 0, 117090.6, 494738.4, 5118.2, 8823.4, 4835.6,
                                                             6311.4, 30489.4, 13753.2, 177315.8, 3108.6, 19844.8, 2700.4,
                                                             9514.2, 187018.4, 4082, 0, 0, 131974.2, 550756, 237603.8,
                                                             0, 0, 42975390.2, 0, 0, 0, 0, 0, 0, 0, 0, 934087.2, 1105468.4,
                                                             26187.6, 66787.8, 69268.4, 66065.6, 152918, 285614.4, 1624447.6,
                                                             11147, 178603.2, 16799, 102269.8, 466792.4, 62486, 0, 0,
                                                             531413.6, 8758778.8, 649948.6, 0, 0, 70884181.2, 0, 0, 0,
                                                             0, 31.4, 0, 0, 0, 2778020.8, 2715252.2, 131283.4, 246647,
                                                             238263.2, 121612.2, 448706, 1315879.8, 3444077.6, 50208.6,
                                                             479038.4, 62172, 262252.8, 1659395.8, 172825.6, 0, 0, 948028.8,
                                                             22171383, 1100946.8, 0, 0, 120545918.8, 0, 0, 0, 0, 4396,
                                                             7787.2, 188.4, 0, 2996502, 3180977, 139196.2, 289099.8, 280590.4,
                                                             153137.8, 481487.6, 1445530.4, 3795663.4, 51464.6, 508554.4,
                                                             69205.6, 308002.6, 2090957.4, 214933, 0, 0, 1188898.2, 26014868.6,
                                                             1245135.6, 0, 0, 132547218.6, 0, 0, 0, 0, 4396, 7787.2, 188.4,
                                                             0, 3005953.4, 3434061, 139604.4, 292396.8, 284327, 154896.2,
                                                             484156.6, 1451245.2, 3825399.2, 52124, 510626.8, 69488.2,
                                                             311739.2, 2314588.2, 218387, 0, 0, 1317920.8, 26014962.8,
                                                             1299740.2, 0, 0, 135393911.2, 0, 0, 0, 0, 4396, 7787.2, 188.4,
                                                             0, 3393178.2, 4138206, 158727, 337141.8, 364522.6, 191697,
                                                             503530.4, 1539479.2, 4285409.2, 54667.4, 810528.2, 79253.6,
                                                             349262.2, 2887481.2, 287529.8, 0, 0, 1564976, 27740644, 1436393,
                                                             0, 0, 159870650.8, 0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 3412520.6,
                                                             4373423.4, 159449.2, 341004, 367756.8, 192796, 508240.4,
                                                             1546230.2, 4313669.2, 55264, 813291.4, 79379.2, 352841.8,
                                                             3161100.8, 290167.4, 0, 0, 1974589, 27740644, 1561553.4,
                                                             0, 0, 162577990.2, 0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 3433119,
                                                             4718949, 159920.2, 341946, 369232.6, 193926.4, 511003.6,
                                                             1551097.2, 4323874.2, 55609.4, 814673, 79473.4, 354474.6,
                                                             3465618, 291549, 0, 0, 2358014.4, 28023746.4, 1638357.8,
                                                             0, 0, 164349232.8, 0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 3729158.2,
                                                             5026355, 167142.2, 374256.6, 418938.8, 194617.2, 536280.6,
                                                             1677890.4, 4576204.6, 56174.6, 843686.6, 83524, 389265.8,
                                                             3753932.8, 333687.8, 0, 0, 2766905.2, 29136248.4, 1713403.8,
                                                             0, 0, 168137862.6, 0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 3748375,
                                                             5137699.4, 167864.4, 375387, 420634.4, 194805.6, 540362.6,
                                                             1686023, 4587508.6, 56394.4, 845539.2, 83712.4, 390616, 3880412,
                                                             335571.8, 0, 0, 2891217.8, 29391907.2, 1812188.2, 0, 0, 170270833.2,
                                                             0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 3756853, 5180183.6, 168241.2,
                                                             376423.2, 421984.6, 194931.2, 542121, 1693527.6, 4596018,
                                                             56425.8, 846544, 83900.8, 391683.6, 3920509.8, 336576.6,
                                                             0, 0, 3013238.2, 29620624.8, 1843180, 0, 0, 171548279.4,
                                                             0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 3848760.8, 5405133.2,
                                                             173799, 377867.6, 423774.4, 195119.6, 561997.2, 1702853.4,
                                                             4605469.4, 56488.6, 848836.2, 83900.8, 392814, 4157988, 337989.6,
                                                             0, 0, 3140345.4, 30611294.8, 2006805.4, 0, 0, 173898977.6,
                                                             0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 4689213.2, 6665717.6,
                                                             204979.2, 408514, 473135.2, 214650.4, 694756.4, 2002943.2,
                                                             5011188.8, 74512.2, 904696.8, 89113.2, 424779.2, 5115185.6,
                                                             367599.8, 0, 0, 4277339.4, 34801122.4, 2123990.2, 0, 0, 199118076,
                                                             0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 4709089.4, 6875720.8,
                                                             205481.6, 408859.4, 473480.6, 215058.6, 697613.8, 2010510.6,
                                                             5014517.2, 74606.4, 905010.8, 89144.6, 425218.8, 5346132.6,
                                                             367882.4, 0, 0, 4404195.4, 35074176.8, 2254708.4, 0, 0, 200453361,
                                                             0, 0, 0, 0, 4396, 7787.2, 188.4, 0, 5996175.4, 9642406.2,
                                                             290104.6, 497533, 584605.2, 272426.4, 959238.6, 2653174.4,
                                                             5981511.6, 117907, 1109267.8, 101076.6, 522590.2, 8216940.4,
                                                             447198.8, 0, 0, 5414553.2, 47757390.4, 2686395.6, 0, 0, 246590291.6,
                                                             0, 0, 0, 0, 4396, 7818.6, 188.4, 0, 6862250.2, 10482324.8,
                                                             309195.8, 542968.8, 631893.6, 277293.4, 1041789.2, 2796955,
                                                             6407232.8, 119696.8, 1285578.8, 109774.4, 561651.8, 8823902.4,
                                                             481393.4, 0, 0, 5965309.2, 58164041.2, 2853004, 0, 0, 283187619.6,
                                                             0, 0, 0, 0, 4396, 7818.6, 188.4, 0, 6896382, 10773811, 310891.4,
                                                             546077.4, 635661.6, 279020.4, 1067882.6, 2804428.2, 6433703,
                                                             120701.6, 1291073.8, 110151.2, 564634.8, 9040217, 483968.2,
                                                             0, 0, 6160303.2, 58977740.8, 2893133.2, 0, 0, 292237696.2,
                                                             0, 0, 0, 0, 4396, 7818.6, 188.4, 0, 7523628.4, 12209984.2,
                                                             410146.8, 659054.6, 722733.8, 323294.4, 1212448.2, 3140533.8,
                                                             8088891.2, 157314, 1959579.8, 147768.4, 656856.6, 10347085,
                                                             553268, 0, 0, 6947626.8, 60349167.2, 3372203, 0, 0, 328576351,
                                                             0, 0, 0, 0, 4396, 7818.6, 188.4, 0, 8087572.4, 12785357.8,
                                                             420320.4, 708792.2, 781922.8, 355636.4, 1285987, 3254515.8,
                                                             8581463, 160108.6, 2072368.6, 152541.2, 709891.2, 10971945,
                                                             608500.6, 0, 0, 7452381.8, 66237263.8, 3548702.4, 0, 0, 367839758.8,
                                                             0, 0, 0, 0, 4396, 7818.6, 188.4, 0), .Dim = c(31L, 20L),
                                                           .Dimnames = list(
                                                               c("Upper Sacramento River", "Antelope Creek", "Battle Creek",
                                                                 "Bear Creek", "Big Chico Creek", "Butte Creek", "Clear Creek",
                                                                 "Cottonwood Creek", "Cow Creek", "Deer Creek", "Elder Creek",
                                                                 "Mill Creek", "Paynes Creek", "Stony Creek", "Thomes Creek",
                                                                 "Upper-mid Sacramento River", "Sutter Bypass", "Bear River",
                                                                 "Feather River", "Yuba River", "Lower-mid Sacramento River",
                                                                 "Yolo Bypass", "American River", "Lower Sacramento River",
                                                                 "Calaveras River", "Cosumnes River", "Mokelumne River",
                                                                 "Merced River", "Stanislaus River", "Tuolumne River",
                                                                 "San Joaquin River"), c("1", "2", "3", "4", "5", "6",
                                                                                         "7", "8", "9", "10", "11", "12", "13", "14", "15", "16",
                                                                                         "17", "18", "19", "20"))),
                              viability_metrics = structure(c(0,0, 0, 0, 0, 0, 2, 2, 0, 1, 1, 1, 1, 1, 0, 0, 0, 0, 1, 0,
                                                              0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
                                                              0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 0,
                                                              0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0), .Dim = c(19L,  4L)))

test_that("The full model results remain the same (with a set seed)", {
  expect_equal(run_model(), expected_model_output)
})
