<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Structured Decision Fall Run Model for CVPIA • fallRunDSM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Structured Decision Fall Run Model for CVPIA">
<meta property="og:description" content="SDM is a key effort by CVPIA agencies to continuously improve project 
    recommendations and prioritization toward the anadromous fish doubling goal. 
    Our intent is to improve collaboration under a science-based framework that is 
    both transparent and efficient. This package contains life cycle models for the 
    for the key species impacted by CVPIA.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fallRunDSM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/calibration-2021.html">Calibration</a>
    </li>
    <li>
      <a href="articles/sensitivity-analysis.html">Sensitivity Analysis</a>
    </li>
    <li>
      <a href="articles/hatchery-analysis.html">Hatchery Analysis</a>
    </li>
    <li>
      <a href="articles/temperature-model.html">Temperature Modeling</a>
    </li>
    <li>
      <a href="articles/model_faq.html">Model FAQ</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/CVPIA-OSC/fallRunDSM" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="fall-chinook-salmon-science-integration-team-model">Fall Chinook Salmon Science Integration Team Model<a class="anchor" aria-label="anchor" href="#fall-chinook-salmon-science-integration-team-model"></a>
</h1></div>
<div class="section level2">
<h2 id="primary-authors">Primary Authors:<a class="anchor" aria-label="anchor" href="#primary-authors"></a>
</h2>
<p>James T. Peterson<br>
U.S. Geological Survey, Oregon Cooperative Fish and Wildlife<br>
Research Unit, Oregon State University<br>
Corvallis, Oregon 97331-3803, <a href="mailto:jt.peterson@oregonstate.edu">jt.peterson@oregonstate.edu</a></p>
<p>Adam Duarte<br>
USDA Forest Service, Pacific Northwest Research Station<br>
Olympia, Washington 98512<br><a href="mailto:adam.duarte@usda.gov">adam.duarte@usda.gov</a></p>
</div>
<div class="section level2">
<h2 id="disclaimer">Disclaimer:<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p>Although this code has been processed successfully on a computer system at the U.S. Geological Survey (USGS), no warranty expressed or implied is made regarding the display or utility of the code for other purposes, nor on all computer systems, nor shall the act of distribution constitute any such warranty. The USGS or the U.S. Government shall not be held liable for improper or incorrect use of the code described and/or contained herein.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="external-link">CC BY-NC-SA 4.0</a></p>
<p>IP-117068</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="package-installation">Package Installation<a class="anchor" aria-label="anchor" href="#package-installation"></a>
</h3>
<p>The <code>fallRunDSM</code> package depends on a number of packages developed by the <a href="https://github.com/CVPIA-OSC" class="external-link">CVPIA Open Science Collaborative</a>. To install <code>fallRunDSM</code> and additional <code>CVPIA-OSC</code> packages use the <code><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">remotes::install_github()</a></code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/fallRunDSM"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMscenario"</span><span class="op">)</span>

<span class="co"># optional - need if calibrating model</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMCalibrationData"</span><span class="op">)</span>

<span class="co"># optional - need if wanting to explore or modify flow, habitat, and temperature inputs</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMflow"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMhabitat"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMtemperature"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="run-model">Run Model<a class="anchor" aria-label="anchor" href="#run-model"></a>
</h3>
<p>The <code><a href="reference/fall_run_model.html">fall_run_model()</a></code> is a Fall Run Chinook life cycle model used for <a href="http://cvpia.scienceintegrationteam.com/" class="external-link">CVPIA’s Structured Decision Making Process</a>. Running the model simulates Fall Run Chinook population dynamics across 31 watersheds in California over a 20 year period.</p>
<p>The following code runs the fall run model with SIT defined scenario 1:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># seed the model</span>
<span class="va">fall_run_seeds</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"seed"</span><span class="op">)</span>

<span class="co"># run the 20 year simulation</span>
<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>scenario <span class="op">=</span> <span class="fu">DSMscenario</span><span class="fu">::</span><span class="va"><a href="https://CVPIA-OSC.github.io/DSMscenario//reference/scenarios.html" class="external-link">scenarios</a></span><span class="op">$</span><span class="va">ONE</span>,
                          mode <span class="op">=</span> <span class="st">"simulate"</span>,
                          seeds <span class="op">=</span> <span class="va">fall_run_seeds</span><span class="op">)</span></code></pre></div>
<p>The following code runs the fall run model with a custom scenario defined in <code>scenario_df</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># define scenario</span>
<span class="va">scenario_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>watershed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Upper Sacramento River"</span>, <span class="st">"Battle Creek"</span><span class="op">)</span>,
                          action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,
                          start_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1980</span>, <span class="fl">1979</span><span class="op">)</span>,
                          end_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1989</span>, <span class="fl">1988</span><span class="op">)</span>,
                          units_of_effort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>

<span class="co"># create scenario input</span>
<span class="va">scenario</span> <span class="op">&lt;-</span> <span class="fu">DSMscenario</span><span class="fu">::</span><span class="fu"><a href="https://CVPIA-OSC.github.io/DSMscenario//reference/get_action_matrices.html" class="external-link">get_action_matrices</a></span><span class="op">(</span><span class="va">scenario_df</span><span class="op">)</span>

<span class="co"># seed model</span>
<span class="va">fall_run_seeds</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"seed"</span><span class="op">)</span>

<span class="co"># evaluate the impact of your scenario over the 20 year simulation</span>
<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>scenario <span class="op">=</span> <span class="va">scenario</span>,
                          mode <span class="op">=</span> <span class="st">"simulate"</span>,
                          seeds <span class="op">=</span> <span class="va">fall_run_seeds</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="details-on-supporting-data">Details on Supporting Data<a class="anchor" aria-label="anchor" href="#details-on-supporting-data"></a>
</h2>
<div class="section level3">
<h3 id="dependencies">Dependencies<a class="anchor" aria-label="anchor" href="#dependencies"></a>
</h3>
<p>The <code>fallRunDSM</code> package uses data from several other packages within the <a href="https://github.com/CVPIA-OSC" class="external-link">CVPIA Open Science Collaborative</a>. These relationships are visualized in the dependency graph below.</p>
<p><img src="reference/figures/dependencyChain.svg" width="100%"></p>
</div>
<div class="section level3">
<h3 id="flow-habitat-and-temperature-data">Flow, Habitat, and Temperature Data<a class="anchor" aria-label="anchor" href="#flow-habitat-and-temperature-data"></a>
</h3>
<p>All data used in the <code>fallRunDSM</code> is passed in as a argument to <code><a href="reference/fall_run_model.html">fall_run_model()</a></code> from a <code><a href="reference/params.html">fallRunDSM::params</a></code> data list that is composed of data objects from the following packages:</p>
<ul>
<li>
<strong>Flow Data</strong>: View detailed documentation of flow data inputs at <a href="https://cvpia-osc.github.io/DSMflow/" class="external-link">DSMflow</a>. Flow inputs to the <code>fallRunDSM</code> are generated using CalSim 2 data.</li>
<li>
<strong>Habitat Data</strong>: View detailed documentation of habitat data inputs at <a href="https://cvpia-osc.github.io/DSMhabitat/" class="external-link">DSMhabitat</a>. Modeling details for each stream can be viewed <a href="https://cvpia-osc.github.io/DSMhabitat/reference/habitat_data.html#modeling-details-for-streams" class="external-link">here</a>.</li>
<li>
<strong>Temperature Data</strong>: View detailed documentation of temperature data inputs at <a href="https://cvpia-osc.github.io/DSMtemperature/" class="external-link">DSMtemperature</a>. Modeling details for each stream can be viewed <a href="https://cvpia-osc.github.io/DSMtemperature/reference/stream_temperature.html#watershed-modeling-details" class="external-link">here</a>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="scenario-functionality">Scenario Functionality<a class="anchor" aria-label="anchor" href="#scenario-functionality"></a>
</h3>
<p>Running scenarios through the <code><a href="reference/fall_run_model.html">fall_run_model()</a></code> model the impact of restoration actions on Fall Run Chinook populations. The <a href="http://cvpia.scienceintegrationteam.com/" class="external-link">CVPIA SIT (Science Integration Team)</a> has developed restoration action portfolios composed of actions preformed on watersheds over a set time period.</p>
<p>There are seven predefined scenarios that were developed by the CVPIA SIT. Additional scenarios can be defined by creating a <code>scenario_df</code> describing watershed, action, start year, end year, and units of effort. The function <code>get_action_matrices()</code> takes a user defined <code>scenario_df</code> and returns a scenario in the correct format to be used as the <code>scenario</code> input for <code><a href="reference/fall_run_model.html">fall_run_model()</a></code>. For additional description on how to build a scenario view <code>load_scenario()</code> documentation by searching <code>?DSMscenario::load_scenario()</code></p>
</div>
<div class="section level3">
<h3 id="calibration-data">Calibration Data<a class="anchor" aria-label="anchor" href="#calibration-data"></a>
</h3>
<p>We prepared additional datasets in the <code>DSMCalibration</code> package for model calibration:</p>
<ol style="list-style-type: decimal">
<li><p><a href="https://wildlife.ca.gov/Conservation/Fishes/Chinook-Salmon/Anadromous-Assessment" class="external-link">GrandTab</a> estimated escapement data for the years 1998-2017. The GrandTab data is prepared as <code><a href="https://rdrr.io/pkg/DSMCalibrationData/man/grandtab.html" class="external-link">DSMCalibrationData::grandtab_observed</a></code> and is used to measure the difference between model predictions and observed escapements. Grandtab data is additionally prepared as <code><a href="https://rdrr.io/pkg/DSMCalibrationData/man/grandtab.html" class="external-link">DSMCalibrationData::grandtab_imputed</a></code> and is used to calculate the number of juveniles during the 20 year simulation.</p></li>
<li><p>Proxy years are used to select Habitat, Flow, and Temperature data for 1998-2017 to correspond with the years of GrandTab escapement data. The data inputs to the DSM are for years 1980-1999. We selected proxy years for 1998-2017 from the 1980-1999 model inputs by <a href="https://cdec.water.ca.gov/reportapp/javareports?name=WSIHIST" class="external-link">comparing the DWR water year indices</a>.</p></li>
</ol>
<p>For a detailed overview of the calibration process see the <a href="https://cvpia-osc.github.io/fallRunDSM/articles/calibration-2021.html" class="external-link">calibration markdown.</a></p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/CVPIA-OSC/fallRunDSM" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/CVPIA-OSC/fallRunDSM/issues" class="external-link">Report a bug</a></li>
<li><a href="https://www.fws.gov/cno/fisheries/CAMP/CVPIA/" class="external-link">Fish and Wildlife Service's CVPIA website</a></li>
<li><a href="https://www.usbr.gov/mp/cvpia/" class="external-link">Bureau of Reclamation's CVPIA website</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing fallRunDSM</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>James Petterson <br><small class="roles"> Author </small>  </li>
<li>Adam Duarte <br><small class="roles"> Author </small>  </li>
<li>Sadie Gill <br><small class="roles"> Author </small>  </li>
<li>Emanuel Rodriguez <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by James Petterson, Adam Duarte, Sadie Gill, Emanuel Rodriguez.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
