<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Structured Decision Fall Run Model for CVPIA • fallRunDSM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Structured Decision Fall Run Model for CVPIA">
<meta property="og:description" content="SDM is a key effort by CVPIA agencies to continuously improve project 
    recommendations and prioritization toward the anadromous fish doubling goal. 
    Our intent is to improve collaboration under a science-based framework that is 
    both transparent and efficient. This package contains life cycle models for the 
    for the key species impacted by CVPIA.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fallRunDSM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="fall-chinook-salmon-science-integration-team-model" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#fall-chinook-salmon-science-integration-team-model" class="anchor"></a>Fall Chinook Salmon Science Integration Team Model</h1></div>
<div id="primary-authors" class="section level2">
<h2 class="hasAnchor">
<a href="#primary-authors" class="anchor"></a>Primary Authors:</h2>
<p>James T. Peterson<br>
U.S. Geological Survey, Oregon Cooperative Fish and Wildlife<br>
Research Unit, Oregon State University<br>
Corvallis, Oregon 97331-3803, <a href="mailto:jt.peterson@oregonstate.edu" class="email">jt.peterson@oregonstate.edu</a></p>
<p>Adam Duarte<br>
Oregon Cooperative Fish and Wildlife Research Unit,<br>
Oregon State University,<br>
Corvallis, Oregon 97331-3803, <a href="mailto:adam.duarte@oregonstate.edu" class="email">adam.duarte@oregonstate.edu</a></p>
</div>
<div id="disclaimer" class="section level2">
<h2 class="hasAnchor">
<a href="#disclaimer" class="anchor"></a>Disclaimer:</h2>
<p>Although this code has been processed successfully on a computer system at the U.S. Geological Survey (USGS), no warranty expressed or implied is made regarding the display or utility of the code for other purposes, nor on all computer systems, nor shall the act of distribution constitute any such warranty. The USGS or the U.S. Government shall not be held liable for improper or incorrect use of the code described and/or contained herein.</p>
</div>
<div id="license" class="section level2">
<h2 class="hasAnchor">
<a href="#license" class="anchor"></a>License</h2>
<p><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p>
<p>IP-117068</p>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="package-installation" class="section level3">
<h3 class="hasAnchor">
<a href="#package-installation" class="anchor"></a>Package Installation</h3>
<p><code>fallRunDSM</code> works as part of a larger set of packages developed by the <a href="https://github.com/CVPIA-OSC">CVPIA Open Science Collaborative</a>. To install <code>fallRunDSM</code> and additional <code>CVPIA-OSC</code> packages use the <code><a href="https://remotes.r-lib.org/reference/install_github.html">remotes::install_github()</a></code> function.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMflow"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMhabitat"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMtemperature"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMscenario"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/DSMCalibrationData"</span><span class="op">)</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"CVPIA-OSC/fallRunDSM"</span><span class="op">)</span></code></pre></div>
</div>
<div id="run-model" class="section level3">
<h3 class="hasAnchor">
<a href="#run-model" class="anchor"></a>Run Model</h3>
<p>The <code>fallrunDSM</code> is a Fall Run Chinook life cycle model used for CVPIA’s Structured Decision Making Process. Running the model simulates Fall Run Chinook population dynamics across 31 watersheds in California over a 20 year period. View the <a href="https://cvpia-osc.github.io/fallRunDSM/reference/fall_run_model.html">fall_run_model()</a> documentation for additional information on running the <code>fall_run_model</code>.</p>
<p>The following code runs the fall run model with SIT defined scenario 1 and <code>fall_run_seeds</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">fall_run_seeds</span> <span class="op">&lt;-</span> <span class="fu">fallRunDSM</span><span class="fu">::</span><span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"seed"</span><span class="op">)</span>
<span class="fu">fallRunDSM</span><span class="fu">::</span><span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>scenario <span class="op">=</span> <span class="fu">DSMscenario</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/DSMscenario/man/scenarios.html">scenarios</a></span><span class="op">$</span><span class="va">ONE</span>,
                           mode <span class="op">=</span> <span class="st">"simulate"</span>,
                           seeds <span class="op">=</span> <span class="va">fall_run_seeds</span><span class="op">)</span></code></pre></div>
<p>The following code runs the fall run model with a custom scenario defined in <code>scenario_df</code> and <code>fall_run_seeds</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">scenario_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>watershed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Upper Sacramento River"</span>, <span class="st">"Battle Creek"</span><span class="op">)</span>,
                          action <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">2</span><span class="op">)</span>,
                          start_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1980</span>, <span class="fl">1979</span><span class="op">)</span>,
                          end_year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1989</span>, <span class="fl">1988</span><span class="op">)</span>,
                          units_of_effort <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span>

<span class="va">fall_run_seeds</span> <span class="op">&lt;-</span> <span class="fu">fallRunDSM</span><span class="fu">::</span><span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>mode <span class="op">=</span> <span class="st">"seed"</span><span class="op">)</span>

<span class="fu">fallRunDSM</span><span class="fu">::</span><span class="fu"><a href="reference/fall_run_model.html">fall_run_model</a></span><span class="op">(</span>scenario <span class="op">=</span> <span class="va">scenario_df</span>,
                           mode <span class="op">=</span> <span class="st">"simulate"</span>,
                           seeds <span class="op">=</span> <span class="va">fall_run_seeds</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="details-on-supporting-data" class="section level2">
<h2 class="hasAnchor">
<a href="#details-on-supporting-data" class="anchor"></a>Details on Supporting Data</h2>
<div id="dependencies" class="section level3">
<h3 class="hasAnchor">
<a href="#dependencies" class="anchor"></a>Dependencies</h3>
<p>The <code>fallRunDSM</code> package uses data from several other packages within the <a href="https://github.com/CVPIA-OSC">CVPIA Open Science Collaborative</a>. These relationships are visualized in the dependency graph below.</p>
<p><img src="reference/figures/dependencyChain.svg" width="100%"></p>
</div>
<div id="flow-habitat-and-temperature-data" class="section level3">
<h3 class="hasAnchor">
<a href="#flow-habitat-and-temperature-data" class="anchor"></a>Flow, Habitat, and Temperature Data</h3>
<p>All data used in the <code>fallRunDSM</code> is passed in as a argument to <code><a href="reference/fall_run_model.html">fall_run_model()</a></code> from a <code><a href="reference/params.html">fallRunDSM::params</a></code> data list. <a href="https://cvpia-osc.github.io/fallRunDSM/reference/params.html"><code>fallRunDSM::params</code></a> is composed using data objects from the following packages:</p>
<ul>
<li>
<strong>Flow Data</strong>: View detailed documentation of flow data inputs at <a href="https://cvpia-osc.github.io/DSMflow/">DSMflow</a>. Flow inputs to the <code>fallRunDSM</code> are matrices generated using CALSIM data.</li>
<li>
<strong>Habitat Data</strong>: View detailed documentation of habitat data inputs at <a href="https://cvpia-osc.github.io/DSMhabitat/">DSMhabitat</a>. Habitat inputs to <code>fallRunDSM</code> are matrices based on expert opinion and modeled results for tributaries in the central valley.</li>
<li>
<strong>Temperature Data</strong>: View detailed documentation of temperature data inputs at <a href="https://cvpia-osc.github.io/DSMtemperature/">DSMtemperature</a>. Temperature inputs to <code>fallRunDSM</code> are matrices and are modeled temperature inputs based on NOAA air temperature data.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://cvpia-osc.github.io/DSMflow/">DSMflow</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CVPIA-OSC/DSMhabitat">DSMhabitat</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://CVPIA-OSC.github.io/DSMtemperature/">DSMtemperature</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="scenario-functionality" class="section level3">
<h3 class="hasAnchor">
<a href="#scenario-functionality" class="anchor"></a>Scenario Functionality</h3>
<p>Scenario functionality within the <code>fallRunDSM</code> models the effect of restoration actions on Fall run Chinook. The <a href="http://cvpia.scienceintegrationteam.com/">CVPIA SIT (Science Integration Team)</a> has developed restoration action portfolioscomposed of actions preformed on watersheds over a set time period.</p>
<p>There are seven predefined scenarios that were developed by the CVPIA SIT. Additional scenarios can be defined by creating a <code>scenario_df</code> describing watershed, action, start year, end year, and units of effort. For additional description on how to build a scenario view <code>load_scenario</code> documentation by searching <code>?DSMscenario::load_scenario()</code></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">DSMscenario</span><span class="op">)</span></code></pre></div>
</div>
<div id="calibration-data" class="section level3">
<h3 class="hasAnchor">
<a href="#calibration-data" class="anchor"></a>Calibration Data</h3>
<p>For <code>fallRunDSM</code> model calibration we prepared addtional datasets in a <code>DSMCalibration</code> package:</p>
<ol>
<li><p><a href="https://wildlife.ca.gov/Conservation/Fishes/Chinook-Salmon/Anadromous-Assessment">GrandTab</a> estimated escapement data for the years 1998-2017. The GrandTab data is prepared as <code><a href="https://rdrr.io/pkg/DSMCalibrationData/man/grandtab.html">DSMCalibrationData::grandtab_observed</a></code> and is used to measure the difference between model predictions and observed escapements. Grandtab data is additionally prepared as <code><a href="https://rdrr.io/pkg/DSMCalibrationData/man/grandtab.html">DSMCalibrationData::grandtab_imputed</a></code> and is used to calculate the number of juveniles during the 20 year simulation.</p></li>
<li><p>Proxy years are used to select Habitat, Flow, and Temperature data for 1998-2017 to correspond with the years of GrandTab escapement data. The data inputs to the DSM are for years 1980-1999. We selected proxy years for 1998-2017 from the 1980-1999 model inputs by <a href="https://cdec.water.ca.gov/reportapp/javareports?name=WSIHIST">comparing the DWR water year indices</a>.</p></li>
</ol>
<p>For a detailed overview of the calibration process see the <a href="calibration.Rmd">calibration markdown.</a></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">DSMCalibrationData</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Fish and Wildlife Service's CVPIA website at <br><a href="https://www.fws.gov/lodi/anadromous_fish_restoration/afrp_index.htm">https://​www.fws.gov/​lodi/​anadromous_fish_restoration/​afrp_index.htm</a>
</li>
<li>Bureau of Reclamation's CVPIA website at <br><a href="https://www.usbr.gov/mp/cvpia/">https://​www.usbr.gov/​mp/​cvpia/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>James Petterson <br><small class="roles"> Author </small>  </li>
<li>Adam Duarte <br><small class="roles"> Author </small>  </li>
<li>Sadie Gill <br><small class="roles"> Author </small>  </li>
<li>Emanuel Rodriguez <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by James Petterson, Adam Duarte, Sadie Gill, Emanuel Rodriguez.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
